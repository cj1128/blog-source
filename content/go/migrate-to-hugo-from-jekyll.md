---
date: 2017-06-04T15:46:33+08:00
title: ä» Jekyll è¿ç§»åˆ° Hugoï¼ŒHugo ä¸å®Œå…¨æŒ‡å—
tags: [hugo, golang, ssg]
cover: http://asset.cjting.cn/FlKmTvbJZO1j12pQzImT2EbtVgac.jpeg
aliases:
  - /golang/migrate-to-hugo-from-jekyll/
---
æœ€è¿‘è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨å¿™ç€è¿ç§»åšå®¢ï¼ŒæŠŠåŸæœ¬åŸºäº Jekyll çš„åšå®¢è¿ç§»åˆ°äº† Hugo ä¸Šã€‚

ä¹‹æ‰€ä»¥ä» Jekyll è¿ç§»çš„åŸå› å¹¶ä¸å¤æ‚ï¼Œå°±æ˜¯ä¸€ä¸ªå­—ï¼š**æ…¢**ã€‚Jekyll çš„é€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ï¼Œæˆ‘åªæœ‰å‡ åç¯‡æ–‡ç« ï¼Œåœ¨ Watch æ¨¡å¼ä¸‹ï¼Œæ¯æ¬¡æ”¹åŠ¨ï¼Œé‡æ–°ç”Ÿæˆéƒ½è¦èŠ±è´¹ 3 ç§’é’Ÿï¼Œå®åœ¨æ˜¯å¤ªæ…¢äº†ã€‚

```bash
Regenerating: 1 file(s) changed at 2017-05-14 10:37:16 ...done in 3.085089 seconds.
Regenerating: 1 file(s) changed at 2017-05-14 10:37:20 ...done in 3.121783 seconds.
```

<!--more-->

æˆ‘çš„æœºå™¨æ˜¯ i7 çš„ CPUï¼Œ16G çš„å†…å­˜å¤–åŠ  256G çš„ SSDã€‚å¦‚æ­¤å¼ºçš„é…ç½®ï¼Œå¦‚æ­¤ç®€å•çš„æ“ä½œï¼Œç«Ÿç„¶èŠ±è´¹äº† 3 ç§’é’Ÿï¼Œæˆ‘ä¸çŸ¥é“è¿™æ˜¯ Ruby çš„åŸå› è¿˜æ˜¯å’Œ Jekyll æœ¬èº«çš„å®ç°æœ‰å…³ç³»ï¼Œæˆ‘ä¹Ÿä¸å…³å¿ƒäº†ã€‚æ…¢æˆè¿™æ ·ï¼Œæˆ‘åªèƒ½æ¢æ‰å®ƒäº†ã€‚

è¿™é‡Œè¦æ’ä¸€å¥ï¼Œå¦‚æœä½ çš„ Jekyll ç«™ç‚¹ä¸­ä½¿ç”¨äº† npm æ¥ç®¡ç† JS ä¾èµ–ï¼Œä¸€å®šè¦è®°å¾—é…ç½® Jekyll è®©å®ƒå¿½ç•¥ `node_modules` æ–‡ä»¶å¤¹ï¼Œå¦åˆ™ä¼šæ…¢åˆ°ä½ æ€€ç–‘äººç”Ÿã€‚

## é™æ€ç«™ç‚¹ç”Ÿæˆå™¨

Jekyll æ˜¯ç›®å‰æœ€ä¸ºæµè¡Œçš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ (Static Site Generatorï¼Œåé¢ç®€ç§°ä¸º SSG)ï¼Œæµè¡Œçš„åŸå› æˆ‘æƒ³ä¸€å¤§åŠå½’åŠŸäº GitHub çš„æ¨å¹¿ï¼ŒJekyll æ˜¯ GitHub Pages é»˜è®¤çš„ SSGã€‚

åœ¨æˆ‘çœ‹æ¥ï¼ŒSSG æ˜¯ä¸€ä¸ªååˆ†æœ‰ç”¨çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆé™æ€ç½‘ç«™ã€‚é™æ€ç½‘ç«™æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæœ€ä¸ºå…³é”®çš„æ˜¯ï¼š

1. å¼€å‘éƒ¨ç½²ç»´æŠ¤ç®€å•ï¼Œçœæ—¶çœåŠ›ï¼Œç²¾åŠ›å¯ä»¥ä¸“æ³¨åœ¨å†…å®¹ä¸Šã€‚
2. è®¿é—®é€Ÿåº¦å¿«ï¼Œè¿˜æœ‰ä»€ä¹ˆæ¯”ç›´æ¥è¿”å›å·²ç»æ¸²æŸ“å¥½çš„ç½‘é¡µæ›´å¿«çš„å‘¢ï¼Ÿ

å¹¶ä¸æ˜¯æ¯ä¸€ä¸ªç½‘ç«™éƒ½éœ€è¦ä¸€ä¸ª Server æ¥åŠ¨æ€ç”Ÿæˆå†…å®¹ï¼Œä¹Ÿä¸æ˜¯æ¯ä¸€ä¸ªç½‘ç«™éƒ½éœ€è¦æ•°æ®åº“ã€‚åšå®¢ç³»ç»Ÿï¼Œæ–‡æ¡£ç³»ç»Ÿï¼Œä¼ä¸šå®˜ç½‘ç­‰ç­‰ï¼Œéƒ½æ˜¯é™æ€ç½‘ç«™çš„å¥½ç”¨ä¾‹ã€‚

SSG ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ ¹æ®é…ç½®å’Œå†…å®¹ï¼Œç”Ÿæˆé™æ€ç½‘ç«™ã€‚é…ç½®ä¸€èˆ¬ç”±å…¨å±€é…ç½®ï¼Œæ¨¡æ¿ï¼Œä»¥åŠ `FrontMatter` æ„æˆã€‚

FrontMatter æŒ‡çš„æ˜¯æ–‡ç« æœ€å‰é¢çš„ä¸€æ®µåŒºåŸŸï¼Œä¸€èˆ¬ç”± `---` åˆ†å¼€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™æ®µåŒºåŸŸä¸­æ·»åŠ è¿™ç¯‡æ–‡ç« æºå¸¦çš„æ•°æ®ï¼Œæ•°æ®æ ¼å¼ä¸€èˆ¬æ˜¯ YAMLï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

```markdown
---
name: CJ
date: 2017-06-09T11:01:08+08:00
---
ä»è¿™é‡Œå¼€å§‹æ˜¯æ­£æ–‡çš„å†…å®¹ã€‚
```

åç»­åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›æ•°æ®è¯»å–å‡ºæ¥åšä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ï¼Œæ‰€æœ‰ `name` å±æ€§ä¸º `CJ` çš„æ–‡ç« æˆ‘ä»¬å¯ä»¥æ·»åŠ ç‰¹åˆ«çš„ class è¿›è¡Œé«˜äº®ï¼Œè¿™å°±å¤§å¤§å¢åŠ äº†æ¸²æŸ“çš„çµæ´»æ€§ã€‚

ç›®å‰ï¼Œæœ€ä¸ºæµè¡Œçš„ SSG æ˜¯ [Jekyll]ï¼Œ[Hugo]ï¼Œ[Hexo] è¿™ä¸‰ä¸ªï¼Œä¸å¤ªæµè¡Œçš„æ•°ä¸èƒœæ•°ï¼Œå…·ä½“å¯ä»¥å»çœ‹ [Static Gen] ç½‘ç«™ã€‚

ä¸ç®¡æ˜¯ä»€ä¹ˆå‹å·ï¼Œå·¥ä½œåŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒæŒæ¡äº†ä¸€ä¸ªï¼Œå‰©ä¸‹çš„å­¦ä¹ èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ã€‚é‰´äºæˆ‘å¯¹ Golang çš„å–œçˆ±ï¼Œç®€å•äº†è§£ Hugo ä»¥åï¼Œå°±é€‰æ‹©ä½¿ç”¨ Hugo ä½œä¸ºæ–°çš„åšå®¢å¼•æ“äº†ã€‚

Hugo çš„ä¼˜ç‚¹å¾ˆå¤šï¼Œæœ€ä¸ºé‡è¦çš„è‡ªç„¶æ˜¯ï¼š**å¿«**ã€‚ç›¸æ¯”äº Jekyll è¦èŠ±è´¹ 3 ç§’é’Ÿï¼Œæˆ‘çš„åšå®¢åœ¨ Hugo ä¸‹é‡æ–°ç”Ÿæˆåªè¦èŠ±è´¹ 30msï¼Œè¶³è¶³å¿«äº† 100 å€ã€‚

ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ Hugo æ¥åšä¸€ä¸ªç®€å•çš„åšå®¢ç³»ç»Ÿ (My Blog)ï¼Œäº†è§£ä¸€ä¸‹ Hugo çš„åŸºæœ¬ä½¿ç”¨ï¼Œæœ€ç»ˆé¡¹ç›®åœ¨ [hugo-demo] ä»“åº“ä¸­ã€‚

## å®‰è£…

é¦–å…ˆï¼Œè‡ªç„¶æ˜¯å®‰è£… Hugoï¼Œå¦‚æœä½ æ˜¯ Mac,`brew install hugo`ã€‚

å¦‚æœä½ å®‰è£…äº† Goï¼Œ`go get -u github.com/spf13/hugo`ã€‚

å…¶ä»–æƒ…å†µï¼Œå¯ä»¥ç›´æ¥å» [Hugo Release] é¡µé¢ï¼Œä¸‹è½½å¯¹åº”å¹³å°çš„äºŒè¿›åˆ¶ç¨‹åºå³å¯ã€‚

## éª¨æ¶

æˆ‘ä»¬å…ˆä½¿ç”¨ Hugo ç”Ÿæˆæˆ‘ä»¬çš„åšå®¢ç«™ç‚¹ã€‚

```bash
# hugo æ”¯æŒå¤šç§é…ç½®æ ¼å¼ï¼Œé»˜è®¤ä¸º tomlï¼Œä½¿ç”¨ `-f` æ¥ä¿®æ”¹
hugo new site -f yaml my-blog 
tree my-blog
my-blog
â”œâ”€â”€ archetypes
â”œâ”€â”€ config.yaml
â”œâ”€â”€ content
â”œâ”€â”€ data
â”œâ”€â”€ layouts
â”œâ”€â”€ static
â””â”€â”€ themes

6 directories, 1 file
```

ä¸€å…±å…­ä¸ªæ–‡ä»¶å¤¹ï¼Œå¤–åŠ ä¸€ä¸ªå…¨å±€é…ç½®æ–‡ä»¶ `config.yaml`ã€‚

- `archetypes`ï¼šç»™ä¸åŒçš„ç±»å‹å®šä¹‰é»˜è®¤ FrontMatterï¼Œä¸€èˆ¬ç”¨ä¸ä¸Š
- `content`ï¼šæºæ–‡ä»¶
- `data`ï¼šæ•°æ®æ–‡ä»¶ï¼Œä¸€èˆ¬ä¹Ÿç”¨ä¸ä¸Š
- `layouts`ï¼šæ¨¡æ¿
- `static`ï¼šé™æ€èµ„æºï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦ Hugo å¤„ç†çš„é™æ€èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡ç­‰
- `themes`ï¼šç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå°†ç¬¬ä¸‰æ–¹ä¸»é¢˜æ‹·è´åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹å³å¯ä½¿ç”¨

æ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯ content å’Œ layoutsï¼Œä¸€ä¸ªå­˜æ”¾å†…å®¹ï¼Œä¸€ä¸ªå­˜æ”¾æ¨¡æ¿ã€‚

Hugo ä½¿ç”¨çš„æ¨¡æ¿ä¸º Go æ ‡å‡†åº“ä¸­çš„ `text/template`ï¼Œå’Œæ‰€æœ‰å…¶ä»–æ¨¡æ¿ç³»ç»Ÿä¸€æ ·ï¼Œçœ‹çœ‹æ–‡æ¡£ [Go Template Primer] æŒæ¡åŸºæœ¬å‡½æ•°å³å¯ã€‚

`config.yaml` ä¸­æ˜¯å…¨å±€é…ç½®ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡ç« çš„ FrontMatter æ•°æ®æ ¼å¼ä¸º TOMLï¼Œæˆ‘ä»¬å°†å…¶æ”¹ä¸º YAMLï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®åˆ° `config.yaml` ä¸­ã€‚

```yaml
metaDataFormat: yaml
```

## å†…å®¹

åœ¨ Hugo ä¸­ï¼Œæ‰€æœ‰çš„å†…å®¹å­˜æ”¾åœ¨ `content` ç›®å½•ä¸­ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªç›®å½•ç§°ä¸ºä¸€ä¸ª `section`ï¼Œæˆ‘ä»¬å…ˆæ¥ç”Ÿæˆä¸€äº›å†…å®¹ç”¨äºåé¢æµ‹è¯•æˆ‘ä»¬çš„æ¨¡æ¿ã€‚

å‡è®¾æˆ‘ä»¬åšå®¢æœ‰ä¸¤ä¸ªåˆ†ç±»ï¼Œ`c1` å’Œ `c2`ï¼Œæ¯ä¸ªåˆ†ç±»ä¸‹æœ‰ 1 ç¯‡æ–‡ç« ã€‚

```bash
# ä½¿ç”¨ `hugo new` æŒ‡ä»¤æ¥ç”Ÿæˆæ–‡ç« 
# ä¼šè‡ªåŠ¨æ›¿æˆ‘ä»¬æ·»åŠ å¿…éœ€çš„ FrontMatterï¼Œæ¯”å¦‚ `date` å’Œ `title`
# `hugo new` æŒ‡ä»¤ä¼šè‡ªåŠ¨æ·»åŠ  `content` è·¯å¾„å‰ç¼€
hugo new c1/_index.md
echo "# this is c1" >> content/c1/_index.md
hugo new c1/p1.md
echo "# this is post 1 for cat 1" >> content/c1/p1.md
hugo new c2/_index.md
echo "# this is c2" >> content/c2/_index.md
hugo new c2/p1.md
echo "# this is post 1 for cat 2" >> content/c2/p1.md
```

åœ¨ Hugo ä¸­ï¼Œä¸€åˆ‡ä¸œè¥¿éƒ½æ˜¯ `Page`ï¼ˆé¡µé¢ï¼‰ï¼Œè€Œæ¯ä¸€ä¸ªé¡µé¢éƒ½å¯¹åº”ä¸€ä¸ªæºæ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬è®¿é—® `/c1/` æ—¶ï¼Œå¯¹åº”çš„æºæ–‡ä»¶æ˜¯ `content/c1/_index.md`ï¼Œå½“æˆ‘ä»¬è®¿é—® `/c1/p1/` æ—¶ï¼Œå¯¹åº”çš„æºæ–‡ä»¶åˆ™æ˜¯ `content/c1/p1.md`ã€‚

## æ¨¡æ¿

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å¯åŠ¨ Hugo å¼€å‘æœåŠ¡å™¨æ¥é¢„è§ˆæˆ‘ä»¬çš„ç«™ç‚¹äº†ã€‚

```bash
# é»˜è®¤ç”Ÿæˆçš„æ–‡ç« éƒ½æœ‰ `draft: true` å±æ€§ï¼Œè¡¨ç¤ºæ–‡ç« ä¸ºè‰ç¨¿ï¼ŒHugo é»˜è®¤æƒ…å†µä¸‹å¿½ç•¥ drafts
# `--buildDrafts` å‘Šè¯‰ Hugo æˆ‘ä»¬è¦æ¸²æŸ“ Drafts
hugo server --buildDrafts
```

æ‰“å¼€ 1313 ç«¯å£ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå—¯ï¼Œè¿™å°±å¯¹äº†ã€‚

ä¸ºä»€ä¹ˆä»€ä¹ˆéƒ½æ²¡æœ‰å‘¢ï¼Œå› ä¸ºåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»€ä¹ˆæ¨¡æ¿éƒ½æ²¡æœ‰ç¼–å†™ï¼ŒHugo è¦æ˜¯èƒ½å±•ç°å†…å®¹ï¼Œé‚£å°±å¥‡æ€ªäº†ã€‚

è¿™é‡Œæä¸€ä¸‹ï¼Œåˆ«çš„æ•™ç¨‹å¯èƒ½éƒ½ä¼šè®©æ–°æ‰‹ç›´æ¥å®‰è£… Hugo çš„æŸä¸ªä¸»é¢˜ï¼Œä¸»é¢˜æ˜¯åˆ«äººå†™å¥½çš„æ¨¡æ¿ç³»ç»Ÿå°è£…èµ·æ¥äº†ã€‚æˆ‘è§‰å¾—æŒæ¡ Hugo çš„ä¸€ä¸ªå…³é”®å°±æ˜¯è¦å¼„æ¸…æ¥šå®ƒçš„æ¨¡æ¿ç³»ç»Ÿï¼Œå› æ­¤ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ä½¿ç”¨ä»»ä½•ä¸»é¢˜ï¼Œè‡ªå·±æ¥ç¼–å†™æ¯ä¸€ä¸ªæ¨¡æ¿ã€‚

åœ¨ Hugo çš„æ¨¡æ¿ç³»ç»Ÿä¸­ï¼Œé¡µé¢åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼Œç¬¬ä¸€æ˜¯åˆ—è¡¨å‹é¡µé¢ï¼Œè¿™ç§é¡µé¢å¯¹åº”çš„æºæ–‡ä»¶æ˜¯æŸä¸ªç›®å½•çš„ `_index.md`ï¼Œæ¯”å¦‚ï¼Œå½“æˆ‘ä»¬è®¿é—® `/c1/` æ—¶ï¼ŒHugo é»˜è®¤ä¼šä½¿ç”¨ `list.html` æ¨¡æ¿æ¥æ¸²æŸ“ `content/c1/_index.md` æ–‡ä»¶ã€‚

è¿˜æœ‰ä¸€ç§å°±æ˜¯å•çº¯çš„å†…å®¹é¡µé¢ï¼Œè¿™ç§é¡µé¢å¯¹åº”çš„æºæ–‡ä»¶æ˜¯æŸä¸ªç›®å½•çš„æ™®é€šæ–‡ä»¶ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬è®¿é—® `/c1/p1/` æ—¶ï¼ŒHugo é»˜è®¤ä¼šä½¿ç”¨ `single.html` æ¨¡æ¿æ¥æ¸²æŸ“ `content/c1/p1.md` æ–‡ä»¶ã€‚

é¦–é¡µæ¯”è¾ƒç‰¹æ®Šï¼Œä½¿ç”¨çš„æ¨¡æ¿åå«åš `index.html`ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªå«åš `baseof.html` çš„æ¨¡æ¿ï¼Œçœ‹åå­—å°±çŸ¥é“äº†ï¼Œå®ƒæ˜¯æ ¹æ¨¡æ¿ã€‚

Hugo çš„æ¨¡æ¿å…¨éƒ¨å­˜æ”¾åœ¨ `layouts` ç›®å½•ä¸­ï¼Œé»˜è®¤æ¨¡æ¿å­˜æ”¾åœ¨ `_default` æ–‡ä»¶å¤¹ä¸­ã€‚æ¯ä¸€ä¸ªæºæ–‡ä»¶å¯ä»¥é€šè¿‡ FrontMatter æ¥æŒ‡å®šä½¿ç”¨ä»€ä¹ˆæ¨¡æ¿ï¼Œå¦‚æœä¸æŒ‡å®šå°±ä½¿ç”¨é»˜è®¤æ¨¡æ¿ã€‚æ¸²æŸ“æ¨¡æ¿æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨ç»‘å®šæºæ–‡ä»¶å¯¹åº”çš„ `Page` å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå˜é‡è·å–æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ã€‚

å…ˆæ¥ç¼–å†™ `baseof.html` æ¨¡æ¿ï¼Œæ–°å»º `layouts/_default/baseof.html` æ–‡ä»¶ã€‚

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Blog</title>
</head>
<body>
{{ block "main" . }}
{{ end }}
</body>
</html>
```

Hugo çš„æ¨¡æ¿æœ‰ä¸€ä¸ªå«åš `block` çš„æœºåˆ¶ï¼Œå…·ä½“è§ [Hugo Block]ï¼Œç®€å•æ¥è¯´ï¼Œçˆ¶æ¨¡æ¿å¯ä»¥å®šä¹‰æ¸²æŸ“ä»€ä¹ˆ blockï¼Œç„¶åå­æ¨¡æ¿ä¸­å¯ä»¥å®šä¹‰ block çš„å†…å®¹ã€‚

æ¥ä¸‹æ¥ç¼–å†™ `index.html`ï¼Œæ–°å»º `layouts/index.html` æ–‡ä»¶ã€‚

```html
{{ define "main" }}
  {{ .Content }}
{{ end }}
```

é¦–é¡µçš„æ¨¡æ¿é¦–å…ˆå®šä¹‰ `baseof.html` ä¸­æ¸²æŸ“çš„ `main` blockï¼Œç„¶åç›´æ¥æ¸²æŸ“ Page å˜é‡çš„ `Content` å±æ€§ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„æºæ–‡ä»¶çš„å†…å®¹ã€‚

é¦–é¡µå¯¹åº”çš„æºæ–‡ä»¶æ˜¯ `content/_index.md`ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ã€‚

```bash
hugo new _index.md
echo "# This is index page" >> content/_index.md
```

å›åˆ°æµè§ˆå™¨ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢è‡ªåŠ¨åˆ·æ–°äº†ã€‚

> git checkout skeleton

![](http://asset.cjting.cn/9b85365dgy1fgesi9dqzwj20lz0ay0ss.jpg)

è¿™é‡Œæ¥æ¢³ç†ä¸€ä¸‹ï¼Œå½“ Hugo ç¼–è¯‘æˆ‘ä»¬ç«™ç‚¹æ—¶ï¼Œå‘ç° `content/_index.md` æ–‡ä»¶ï¼ŒHugo ä¼šä½¿ç”¨ `layouts/index.html` å’Œ `layouts/_default/baseof.html` æ¨¡æ¿æ¥æ¸²æŸ“è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†å¾—åˆ°çš„ HTML æ–‡ä»¶æ”¾åœ¨ç»“æœæ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹ï¼Œå½“æˆ‘ä»¬è®¿é—®é¦–é¡µæ—¶ï¼Œå°±ä¼šçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬è¦è§„åˆ’ä¸€ä¸‹åšå®¢çš„ç»“æ„ï¼Œç„¶åä¸€ä¸€å®ç°ã€‚

- é¦–é¡µå’Œåˆ†ç±»é¡µéƒ½éœ€è¦ä¸€ä¸ªé¡¶éƒ¨å¯¼èˆªæ ï¼Œæ˜¾ç¤ºæ‰€æœ‰çš„åˆ†ç±»ï¼Œç‚¹å‡»è·³è½¬åˆ°å¯¹åº”çš„åˆ†ç±»é¡µã€‚
- åˆ†ç±»é¡µæ ¹æ®æ—¶é—´åˆ—å‡ºæ‰€æœ‰çš„åšæ–‡ï¼Œç‚¹å‡»è·³è½¬åˆ°å¯¹åº”çš„åšæ–‡é¡µã€‚
- åšæ–‡é¡µå±•ç¤ºåšæ–‡å†…å®¹ã€‚

## å¯¼èˆªæ 

ç”±äºé¦–é¡µå’Œåˆ†ç±»é¡µéƒ½è¦ç”¨åˆ°å¯¼èˆªæ ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ Hugo çš„ `Partial` æ¥åšï¼ŒPartial ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªç‰‡æ®µï¼Œå¯ä»¥åœ¨ä¸åŒçš„æ¨¡æ¿ä¸­å¼•ç”¨å®ƒã€‚

æˆ‘ä»¬æ‰“ç®—ç›´æ¥å°† `content` ç›®å½•ä¸­çš„å­ç›®å½•ï¼ˆå«åš `section`ï¼‰ä½œä¸ºåˆ†ç±»ï¼Œé¦–å…ˆï¼Œåœ¨å…¨å±€é…ç½®ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ã€‚

```yaml
SectionPagesMenu: main
```

Hugo æä¾›äº†ä¸€å¥—å¤æ‚çš„èœå•ç³»ç»Ÿï¼Œè¿™ä¸ªé…ç½®å‘Šè¯‰ Hugoï¼Œå°†æ‰€æœ‰çš„ section éƒ½æ”¾å…¥ `main` è¿™ä¸ªèœå•ä¸­ï¼Œåœ¨æ¨¡æ¿ä¸­é€šè¿‡éå† main èœå•ï¼Œä¾¿å¯ä»¥æ¸²æŸ“å‡ºæ‰€æœ‰çš„åˆ†ç±»ã€‚

æ–°å»ºæ–‡ä»¶ï¼Œ`layouts/partials/header.html`ã€‚

```html
<header>
  <nav>
    {{ range .Site.Menus.main }}
      <a class="{{if eq $.URL .URL}}active{{end}}" href="{{ .URL }}">
        {{ .Name }}
      </a>
    {{ end }}
  </nav>
</header>
```

å…ˆæŠŠè¿™ä¸ªåº”ç”¨åˆ°é¦–é¡µä¸Šçœ‹çœ‹ï¼Œç¼–è¾‘æ–‡ä»¶ `layouts/index.html`ã€‚

```html
{{ define "main" }}
  <main>
    {{ partial "header" . }}
    <article>
      {{ .Content }}
    </article>
  </main>
{{ end }}
```

æµè§ˆå™¨é¡µé¢å¦‚ä¸‹ã€‚

![](http://asset.cjting.cn/9b85365dgy1fgeslx5j0ij20ly0bgglo.jpg)

çœ‹èµ·æ¥ï¼Œheader ç”Ÿæ•ˆäº†ï¼Œä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆä¸¤ä¸ªåˆ†ç±»çš„åç§°å«åš `_index` å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒHugo ä¼šä½¿ç”¨åˆ†ç±»å¯¹åº”çš„æºæ–‡ä»¶çš„ `title`å±æ€§ï¼Œè¿™ä¸ªå±æ€§é»˜è®¤æ˜¯æ–‡ä»¶åã€‚

ç¼–è¾‘ `content/c1/_index.md` æ–‡ä»¶å’Œ `content/c2/_index.md` æ–‡ä»¶çš„ `title` å±æ€§ï¼Œæ”¹ä¸º `åˆ†ç±»1` å’Œ `åˆ†ç±»2`ï¼Œè¿™æ¬¡å°±æ­£ç¡®äº†ã€‚

## åˆ†ç±»é¡µ

ç‚¹å‡»è¿™ä¸¤ä¸ªåˆ†ç±»ï¼Œå‘ç°å†…å®¹æ˜¯ç©ºç™½çš„ï¼Œå½“ç„¶ï¼Œåˆ†ç±»é¡µç”¨çš„æ¨¡æ¿æ˜¯ `list.html`ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰ç¼–å†™ã€‚

æ–°å»º `layouts/_default/list.html` æ–‡ä»¶ã€‚

```html
{{ define "main" }}
  {{ partial "header" . }}
  <div class="list">
    {{ range .Data.Pages.GroupByDate "2006-01" }}
      <div class="list__item">
        <h3 class="list__title">{{ .Key }}</h3>
        <ul>
          {{ range .Pages }}
            <li class="list__post">
              <span></span>
              <a href="{{ .Permalink }}">{{ .Title }}</a>
              <div>{{ .Date.Format "2006.01.02" }}</div>
            </li>
          {{ end }}
        </ul>
      </div>
    {{ end }}
  </div>
{{ end }}
```

æ¨¡æ¿ä»£ç çš„å«ä¹‰æ˜¯æ ¹æ®æ—¥æœŸå’Œæ—¶é—´æ¥æ¸²æŸ“åˆ†ç±»ä¸‹çš„åšæ–‡ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚

![](http://asset.cjting.cn/9b85365dgy1fgetkmelx0j20nl0azq30.jpg)

## åšæ–‡é¡µ

æœ€åï¼Œä¾¿æ˜¯å±•ç¤ºå•ç¯‡åšæ–‡çš„åšæ–‡é¡µï¼Œä½¿ç”¨çš„æ¨¡æ¿æ˜¯ `single.html`ï¼Œæ–°å»ºæ–‡ä»¶ `layouts/_default/single.html` å¦‚ä¸‹ã€‚

```html
{{ define "main" }}
  <article>
    {{ .Content }}
  </article>
{{ end }}
```

å¾ˆç®€å•ï¼Œç›´æ¥æ¸²æŸ“åšæ–‡å†…å®¹ï¼Œ`http://localhost:1313/c1/p1/` é¡µé¢å¦‚ä¸‹ã€‚

![](http://asset.cjting.cn/9b85365dgy1fgetqxr6fhj20nl078mx4.jpg)

ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„åšå®¢åŸºæœ¬ç»“æ„å°±æ­å»ºå¥½äº†ã€‚

> git checkout basic

## CSSï¼ŒJS åŠå…¶ä»–é™æ€èµ„æº

ç°åœ¨å‰©ä¸‹çš„å·¥ä½œä¾¿æ˜¯ä½¿ç”¨ CSS æ¥ç¾åŒ–æˆ‘ä»¬çš„åšå®¢äº†ã€‚

Hugo æ ¹ç›®å½•ä¸­çš„ `static` ç›®å½•ç”¨äºå­˜å‚¨å„ç§é™æ€æ–‡ä»¶ï¼ŒåŒ…æ‹¬ CSS å’Œ JSï¼Œé‡Œé¢çš„å†…å®¹åœ¨ Hugo ç”Ÿæˆç«™ç‚¹æ—¶ä¼šè¢«åŸå°ä¸åŠ¨æ‹·è´åˆ°ç›®æ ‡ç›®å½•ä¸­ï¼ˆé»˜è®¤æ˜¯ publicï¼‰ã€‚

æ–°å»º `static/main.css` æ–‡ä»¶ï¼Œä¿®æ”¹ `layouts/_default/baseof.html` åŸºç¡€æ¨¡æ¿å¼•å…¥è¿™ä¸ªæ–‡ä»¶ã€‚

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Blog</title>
  <link rel="stylesheet" type="text/css" href="/main.css">
</head>
<body>
{{ block "main" . }}
{{ end }}
</body>
</html>
```

å¼•å…¥ JS çš„é“ç†åŒä¸Šã€‚è‡³äºå…·ä½“çš„æ ·å¼ä»£ç ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ã€‚

![](http://asset.cjting.cn/9b85365dgy1fgfz1ofshej20sj0e33ys.jpg)

> git checkout final

## å‘å¸ƒ

æœ€åä¸€æ­¥ä¾¿æ˜¯å‘å¸ƒï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ `hugo` å°±å¯ä»¥å°†ç«™ç‚¹ç”Ÿæˆåœ¨ `public`æ–‡ä»¶å¤¹ä¸­ï¼Œä¸¢ç»™ Nginx æˆ–è€…ä¼ åˆ° Github ä¸Šéšä¾¿ä½ äº†ã€‚

Hugo å®˜æ–¹æœ‰ä¸€ç¯‡æ–‡æ¡£ [Hosting on GitHub Pages] è¯´æ˜å¦‚ä½•éƒ¨ç½²åœ¨ GitHub ä¸Šï¼Œè¯´çš„å¾ˆè¯¦ç»†ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚

æœ€åï¼ŒHugo ç¡®å®æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ SSGï¼Œæ‹¥æœ‰é€Ÿåº¦å¿«ï¼Œæ¨¡æ¿çµæ´»ï¼Œç»“æ„æ¸…æ™°ç­‰å„ç§ä¼˜ç‚¹ï¼Œå¦‚æœå¤§å®¶æœ‰å…´è¶£ï¼Œä¸‹ä¸€ä¸ªé™æ€ç«™ç‚¹é¡¹ç›®å¯ä»¥è¯•è¯•ç”¨ Hugo æ¥æ„å»ºã€‚å½“ç„¶ï¼Œå†å¥½çš„å·¥å…·ä¹Ÿä¸èƒ½è§£å†³äººçš„æ‡’æƒ°ï¼Œæˆ‘è¦åŠ æ²¹åšæŒå†™åšå®¢äº†~ğŸ˜‰

[Hugo]: https://github.com/spf13/hugo
[Hugo Release]: https://github.com/spf13/hugo/releases
[Hugo Block]: https://gohugo.io/templates/blocks/
[Hugo Template]: https://gohugo.io/templates/overview/
[Static Gen]: https://www.staticgen.com/
[Go Template Primer]: https://gohugo.io/templates/go-templates/
[Hosting on GitHub Pages]: https://gohugo.io/tutorials/github-pages-blog#building-and-deployment
[hugo-demo]: https://github.com/cj1128/hugo-demo
[Jekyll]: https://jekyllrb.com/
[Hexo]: https://hexo.io/
